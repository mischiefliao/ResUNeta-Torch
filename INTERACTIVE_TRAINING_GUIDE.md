# äº¤äº’å¼è®­ç»ƒé€‰æ‹©åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

ç°åœ¨è®­ç»ƒç¨‹åºæ”¯æŒ**äº¤äº’å¼é€‰æ‹©**åŠŸèƒ½ï¼š

1. âœ… **è‡ªåŠ¨æ£€æµ‹ checkpoint**ï¼šç¨‹åºå¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹å·²å­˜åœ¨çš„è®­ç»ƒ checkpoint
2. âœ… **äº¤äº’å¼é€‰æ‹©**ï¼šè¯¢é—®ç”¨æˆ·æ˜¯é‡æ–°å¼€å§‹è®­ç»ƒè¿˜æ˜¯çƒ­å¯åŠ¨è®­ç»ƒ
3. âœ… **æ¸…ç©ºæ—§æƒé‡**ï¼šé€‰æ‹©é‡æ–°è®­ç»ƒæ—¶ï¼Œè‡ªåŠ¨æ¸…ç©ºæ‰€æœ‰æ—§çš„ checkpoint æ–‡ä»¶
4. âœ… **æ™ºèƒ½æ¨è**ï¼šè‡ªåŠ¨åˆ—å‡ºå¯ç”¨çš„ checkpoint ä¾›é€‰æ‹©

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

ç›´æ¥è¿è¡Œè®­ç»ƒå‘½ä»¤ï¼ˆä¸æŒ‡å®š `--resume` å‚æ•°ï¼‰ï¼š

```bash
python main.py --image_path ./Data/images --gt_path ./Data/gt
```

ç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹ checkpoint ç›®å½•ï¼Œå¹¶æ˜¾ç¤ºäº¤äº’å¼èœå•ã€‚

### äº¤äº’å¼èœå•ç¤ºä¾‹

```
============================================================
æ£€æµ‹åˆ°å·²å­˜åœ¨çš„è®­ç»ƒ checkpoint æ–‡ä»¶
============================================================

æ‰¾åˆ° 5 ä¸ª checkpoint æ–‡ä»¶:

å¯ç”¨çš„ checkpoint:
  [1] latest_checkpoint.pth (æœ€æ–°)
  [2] interrupted_checkpoint.pth (ä¸­æ–­ä¿å­˜)
  [3] best_model.pth (æœ€ä½³æ¨¡å‹)
  [4] checkpoint_epoch_*.pth (å…± 10 ä¸ª)

  [N] é‡æ–°å¼€å§‹è®­ç»ƒ (æ¸…ç©ºæ‰€æœ‰ checkpoint)
  [Q] é€€å‡ºç¨‹åº

è¯·é€‰æ‹© [1-4/N/Q]: 
```

### é€‰æ‹©è¯´æ˜

#### é€‰é¡¹ 1-4ï¼šçƒ­å¯åŠ¨è®­ç»ƒ

- **[1] latest_checkpoint.pth**ï¼šä½¿ç”¨æœ€æ–°çš„ checkpointï¼ˆæ¨èï¼‰
- **[2] interrupted_checkpoint.pth**ï¼šä½¿ç”¨ Ctrl+C ä¸­æ–­æ—¶ä¿å­˜çš„ checkpoint
- **[3] best_model.pth**ï¼šä½¿ç”¨éªŒè¯é›†ä¸Šè¡¨ç°æœ€å¥½çš„æ¨¡å‹
- **[4] checkpoint_epoch_*.pth**ï¼šä½¿ç”¨æœ€æ–°çš„ epoch checkpoint

é€‰æ‹©åä¼šæ˜¾ç¤ºï¼š
```
æ‚¨é€‰æ‹©äº†: latest_checkpoint.pth
å°†ä½¿ç”¨ checkpoint: latest_checkpoint.pth
```

#### é€‰é¡¹ Nï¼šé‡æ–°å¼€å§‹è®­ç»ƒ

é€‰æ‹© `N` åï¼Œç¨‹åºä¼šï¼š
1. æ˜¾ç¤ºæ‰€æœ‰è¦åˆ é™¤çš„ checkpoint æ–‡ä»¶
2. è¦æ±‚ç¡®è®¤åˆ é™¤
3. æ¸…ç©ºæ‰€æœ‰ checkpoint æ–‡ä»¶
4. å¼€å§‹æ–°çš„è®­ç»ƒ

**ç¤ºä¾‹äº¤äº’ï¼š**
```
è¯·é€‰æ‹© [1-4/N/Q]: N

æ‚¨é€‰æ‹©äº†é‡æ–°å¼€å§‹è®­ç»ƒã€‚
ç¡®è®¤è¦æ¸…ç©ºæ‰€æœ‰ checkpoint æ–‡ä»¶å—ï¼Ÿ(y/n): y

æ‰¾åˆ° 5 ä¸ª checkpoint æ–‡ä»¶:
  - latest_checkpoint.pth
  - best_model.pth
  - checkpoint_epoch_1.pth
  - checkpoint_epoch_2.pth
  - training_history.png

å·²åˆ é™¤ 5 ä¸ªæ–‡ä»¶/ç›®å½•ã€‚

å¼€å§‹æ–°çš„è®­ç»ƒ...
```

#### é€‰é¡¹ Qï¼šé€€å‡ºç¨‹åº

ç›´æ¥é€€å‡ºï¼Œä¸è¿›è¡Œä»»ä½•æ“ä½œã€‚

## ğŸ“‹ å®Œæ•´ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šç¬¬ä¸€æ¬¡è®­ç»ƒ

å¦‚æœ checkpoint ç›®å½•ä¸ºç©ºæˆ–ä¸å­˜åœ¨ï¼š

```
æœªæ‰¾åˆ°ä»»ä½• checkpoint æ–‡ä»¶ï¼Œå°†å¼€å§‹æ–°çš„è®­ç»ƒã€‚
å¼€å§‹æ–°çš„è®­ç»ƒ...
```

### åœºæ™¯2ï¼šç»§ç»­ä¹‹å‰çš„è®­ç»ƒ

```
è¯·é€‰æ‹© [1-4/N/Q]: 1

æ‚¨é€‰æ‹©äº†: latest_checkpoint.pth
å°†ä½¿ç”¨ checkpoint: latest_checkpoint.pth

Loading checkpoint from ./checkpoints/latest_checkpoint.pth...
Checkpoint loaded from ./checkpoints/latest_checkpoint.pth
Resuming training from epoch 15/100
```

### åœºæ™¯3ï¼šé‡æ–°å¼€å§‹è®­ç»ƒ

```
è¯·é€‰æ‹© [1-4/N/Q]: N

æ‚¨é€‰æ‹©äº†é‡æ–°å¼€å§‹è®­ç»ƒã€‚
ç¡®è®¤è¦æ¸…ç©ºæ‰€æœ‰ checkpoint æ–‡ä»¶å—ï¼Ÿ(y/n): y

æ‰¾åˆ° 5 ä¸ª checkpoint æ–‡ä»¶:
  - latest_checkpoint.pth
  - best_model.pth
  - checkpoint_epoch_10.pth
  - interrupted_checkpoint.pth
  - training_history.png

å·²åˆ é™¤ 5 ä¸ªæ–‡ä»¶/ç›®å½•ã€‚

å¼€å§‹æ–°çš„è®­ç»ƒ...
```

## âš™ï¸ é«˜çº§é€‰é¡¹

### è·³è¿‡äº¤äº’å¼é€‰æ‹©

å¦‚æœä¸æƒ³ä½¿ç”¨äº¤äº’å¼é€‰æ‹©ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š

#### æ–¹å¼1ï¼šç›´æ¥æŒ‡å®š checkpoint

```bash
python main.py \
    --image_path ./Data/images \
    --gt_path ./Data/gt \
    --resume ./checkpoints/latest_checkpoint.pth
```

#### æ–¹å¼2ï¼šéäº¤äº’æ¨¡å¼ï¼ˆè‡ªåŠ¨å¼€å§‹æ–°è®­ç»ƒï¼‰

```bash
python main.py \
    --image_path ./Data/images \
    --gt_path ./Data/gt \
    --no_interactive
```

### å‘½ä»¤è¡Œå‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ |
|------|------|
| `--resume <path>` | ç›´æ¥æŒ‡å®šè¦æ¢å¤çš„ checkpoint è·¯å¾„ï¼ˆè·³è¿‡äº¤äº’å¼é€‰æ‹©ï¼‰ |
| `--no_interactive` | ç¦ç”¨äº¤äº’å¼é€‰æ‹©ï¼Œå¦‚æœæœªæŒ‡å®š `--resume` åˆ™å¼€å§‹æ–°è®­ç»ƒ |

## ğŸ” æ¸…ç©ºåŠŸèƒ½è¯´æ˜

### ä¼šåˆ é™¤å“ªäº›æ–‡ä»¶ï¼Ÿ

é€‰æ‹©é‡æ–°è®­ç»ƒæ—¶ï¼Œä¼šåˆ é™¤ï¼š

- âœ… æ‰€æœ‰ `.pth` æ–‡ä»¶ï¼ˆcheckpoint æ–‡ä»¶ï¼‰
- âœ… `training_history.png`ï¼ˆè®­ç»ƒå†å²å›¾è¡¨ï¼‰
- âœ… æ‰€æœ‰ `checkpoint_epoch_*.pth` æ–‡ä»¶
- âœ… `best_model.pth`
- âœ… `latest_checkpoint.pth`
- âœ… `interrupted_checkpoint.pth`

### å®‰å…¨ç¡®è®¤

åˆ é™¤å‰ä¼šï¼š
1. æ˜¾ç¤ºæ‰€æœ‰è¦åˆ é™¤çš„æ–‡ä»¶åˆ—è¡¨
2. è¦æ±‚ç”¨æˆ·ç¡®è®¤ï¼ˆè¾“å…¥ `y` æˆ– `yes`ï¼‰
3. å¦‚æœå–æ¶ˆï¼ˆè¾“å…¥ `n`ï¼‰ï¼Œå¯ä»¥é‡æ–°é€‰æ‹©

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### æ¨èæµç¨‹

1. **ç¬¬ä¸€æ¬¡è®­ç»ƒ**ï¼šç›´æ¥è¿è¡Œï¼Œç¨‹åºä¼šè‡ªåŠ¨å¼€å§‹æ–°è®­ç»ƒ
2. **ç»§ç»­è®­ç»ƒ**ï¼šé€‰æ‹© `[1] latest_checkpoint.pth`ï¼ˆæœ€ç®€å•ï¼‰
3. **ä»æœ€ä½³æ¨¡å‹ç»§ç»­**ï¼šé€‰æ‹© `[3] best_model.pth`
4. **é‡æ–°å¼€å§‹**ï¼šé€‰æ‹© `[N]` å¹¶ç¡®è®¤åˆ é™¤

### æœ€ä½³å®è·µ

- âœ… å®šæœŸå¤‡ä»½é‡è¦çš„ checkpointï¼ˆç‰¹åˆ«æ˜¯ `best_model.pth`ï¼‰
- âœ… ä½¿ç”¨ `latest_checkpoint.pth` è¿›è¡Œæ—¥å¸¸æ¢å¤
- âœ… é‡æ–°è®­ç»ƒå‰ç¡®è®¤è¦åˆ é™¤çš„æ–‡ä»¶
- âœ… åœ¨ PyCharm ä¸­ä½¿ç”¨ Terminal è¿è¡Œï¼Œä»¥ä¾¿çœ‹åˆ°äº¤äº’å¼èœå•

## â“ å¸¸è§é—®é¢˜

### Q1: äº¤äº’å¼èœå•æ²¡æœ‰æ˜¾ç¤ºï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
- ä½¿ç”¨äº† `--resume` å‚æ•°ï¼ˆä¼šè·³è¿‡äº¤äº’å¼é€‰æ‹©ï¼‰
- ä½¿ç”¨äº† `--no_interactive` å‚æ•°
- åœ¨ Python Console ä¸­è¿è¡Œï¼ˆåº”è¯¥ä½¿ç”¨ Terminal æˆ–è¿è¡Œé…ç½®ï¼‰

**è§£å†³**ï¼š
- ç§»é™¤ `--resume` å’Œ `--no_interactive` å‚æ•°
- ä½¿ç”¨ Terminal æˆ–è¿è¡Œé…ç½®è¿è¡Œ

### Q2: å¦‚ä½•å¤‡ä»½ checkpointï¼Ÿ

åœ¨åˆ é™¤å‰ï¼Œå¯ä»¥æ‰‹åŠ¨å¤åˆ¶é‡è¦çš„ checkpointï¼š

```bash
# å¤‡ä»½æœ€ä½³æ¨¡å‹
cp ./checkpoints/best_model.pth ./backup/best_model_backup.pth
```

### Q3: åˆ é™¤åå¯ä»¥æ¢å¤å—ï¼Ÿ

**ä¸å¯ä»¥**ã€‚åˆ é™¤æ˜¯æ°¸ä¹…æ€§çš„ï¼Œè¯·è°¨æ…æ“ä½œã€‚

å»ºè®®ï¼š
- åˆ é™¤å‰å…ˆå¤‡ä»½é‡è¦æ–‡ä»¶
- ä½¿ç”¨ç¡®è®¤æç¤ºä»”ç»†æ£€æŸ¥è¦åˆ é™¤çš„æ–‡ä»¶

### Q4: å¯ä»¥åœ¨è„šæœ¬ä¸­è‡ªåŠ¨é€‰æ‹©å—ï¼Ÿ

å¯ä»¥ï¼Œä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼š

```bash
# è‡ªåŠ¨ä½¿ç”¨æœ€æ–° checkpoint
python main.py --image_path ./Data/images --gt_path ./Data/gt --resume ./checkpoints/latest_checkpoint.pth

# è‡ªåŠ¨å¼€å§‹æ–°è®­ç»ƒ
python main.py --image_path ./Data/images --gt_path ./Data/gt --no_interactive
```

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

### äº¤äº’å¼é€‰æ‹©æµç¨‹

```
è¿è¡Œç¨‹åº
    â†“
æ£€æµ‹ checkpoint
    â†“
æ˜¾ç¤ºèœå•
    â†“
ç”¨æˆ·é€‰æ‹©
    â†“
[1-4] â†’ åŠ è½½ checkpoint â†’ ç»§ç»­è®­ç»ƒ
[N] â†’ ç¡®è®¤åˆ é™¤ â†’ æ¸…ç©ºæ–‡ä»¶ â†’ æ–°è®­ç»ƒ
[Q] â†’ é€€å‡ºç¨‹åº
```

### å‘½ä»¤è¡Œå‚æ•°ä¼˜å…ˆçº§

1. `--resume <path>`ï¼šæœ€é«˜ä¼˜å…ˆçº§ï¼Œç›´æ¥ä½¿ç”¨æŒ‡å®š checkpoint
2. `--no_interactive`ï¼šè·³è¿‡äº¤äº’ï¼Œå¼€å§‹æ–°è®­ç»ƒ
3. æ— å‚æ•°ï¼šæ˜¾ç¤ºäº¤äº’å¼èœå•

---

**ç°åœ¨æ‚¨å¯ä»¥æ›´æ–¹ä¾¿åœ°ç®¡ç†è®­ç»ƒäº†ï¼** ğŸš€
